//
// PersonalizationAPI.swift
//
// Generated by openapi-generator
// https://openapi-generator.tech
//

import Foundation

#if canImport(AnyCodable)
  import AnyCodable
#endif

open class PersonalizationAPI {

  /**
     Send requests to the Algolia REST API.

     - parameter path: (path) Path of the endpoint, anything after \&quot;/1\&quot; must be specified.
     - parameter parameters: (query) Query parameters to apply to the current query. (optional)
     - returns: AnyCodable
     */
  @available(macOS 10.15, iOS 13.0, tvOS 13.0, watchOS 6.0, *)
  open class func customDelete(path: String, parameters: [String: AnyCodable]? = nil) async throws
    -> AnyCodable
  {
    return try await customDeleteWithRequestBuilder(path: path, parameters: parameters).execute()
      .body
  }

  /**
     Send requests to the Algolia REST API.

     This method allow you to send requests to the Algolia REST API.
     - parameter path: (path) Path of the endpoint, anything after \&quot;/1\&quot; must be specified.
     - parameter parameters: (query) Query parameters to apply to the current query. (optional)
     - returns: RequestBuilder<AnyCodable>
     */
  open class func customDeleteWithRequestBuilder(
    path: String, parameters: [String: AnyCodable]? = nil
  ) -> RequestBuilder<AnyCodable> {
    var localVariablePath = "/1{path}"
    let pathPreEscape = "\(APIHelper.mapValueToPathItem(path))"
    let pathPostEscape =
      pathPreEscape.addingPercentEncoding(withAllowedCharacters: .urlPathAllowed) ?? ""
    localVariablePath = localVariablePath.replacingOccurrences(
      of: "{path}", with: pathPostEscape, options: .literal, range: nil)
    let localVariableURLString = AlgoliaSearchClientAPI.basePath + localVariablePath
    let localVariableParameters: [String: Any]? = nil

    var localVariableUrlComponents = URLComponents(string: localVariableURLString)
    localVariableUrlComponents?.queryItems = APIHelper.mapValuesToQueryItems([
      "parameters": (wrappedValue: parameters?.encodeToJSON(), isExplode: true)
    ])

    let localVariableNillableHeaders: [String: Any?] = [:]

    let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

    let localVariableRequestBuilder: RequestBuilder<AnyCodable>.Type = AlgoliaSearchClientAPI
      .requestBuilderFactory.getBuilder()

    return localVariableRequestBuilder.init(
      method: "DELETE", URLString: (localVariableUrlComponents?.string ?? localVariableURLString),
      parameters: localVariableParameters, headers: localVariableHeaderParameters,
      requiresAuthentication: true)
  }

  /**
     Send requests to the Algolia REST API.

     - parameter path: (path) Path of the endpoint, anything after \&quot;/1\&quot; must be specified.
     - parameter parameters: (query) Query parameters to apply to the current query. (optional)
     - returns: AnyCodable
     */
  @available(macOS 10.15, iOS 13.0, tvOS 13.0, watchOS 6.0, *)
  open class func customGet(path: String, parameters: [String: AnyCodable]? = nil) async throws
    -> AnyCodable
  {
    return try await customGetWithRequestBuilder(path: path, parameters: parameters).execute().body
  }

  /**
     Send requests to the Algolia REST API.

     This method allow you to send requests to the Algolia REST API.
     - parameter path: (path) Path of the endpoint, anything after \&quot;/1\&quot; must be specified.
     - parameter parameters: (query) Query parameters to apply to the current query. (optional)
     - returns: RequestBuilder<AnyCodable>
     */
  open class func customGetWithRequestBuilder(path: String, parameters: [String: AnyCodable]? = nil)
    -> RequestBuilder<AnyCodable>
  {
    var localVariablePath = "/1{path}"
    let pathPreEscape = "\(APIHelper.mapValueToPathItem(path))"
    let pathPostEscape =
      pathPreEscape.addingPercentEncoding(withAllowedCharacters: .urlPathAllowed) ?? ""
    localVariablePath = localVariablePath.replacingOccurrences(
      of: "{path}", with: pathPostEscape, options: .literal, range: nil)
    let localVariableURLString = AlgoliaSearchClientAPI.basePath + localVariablePath
    let localVariableParameters: [String: Any]? = nil

    var localVariableUrlComponents = URLComponents(string: localVariableURLString)
    localVariableUrlComponents?.queryItems = APIHelper.mapValuesToQueryItems([
      "parameters": (wrappedValue: parameters?.encodeToJSON(), isExplode: true)
    ])

    let localVariableNillableHeaders: [String: Any?] = [:]

    let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

    let localVariableRequestBuilder: RequestBuilder<AnyCodable>.Type = AlgoliaSearchClientAPI
      .requestBuilderFactory.getBuilder()

    return localVariableRequestBuilder.init(
      method: "GET", URLString: (localVariableUrlComponents?.string ?? localVariableURLString),
      parameters: localVariableParameters, headers: localVariableHeaderParameters,
      requiresAuthentication: true)
  }

  /**
     Send requests to the Algolia REST API.

     - parameter path: (path) Path of the endpoint, anything after \&quot;/1\&quot; must be specified.
     - parameter parameters: (query) Query parameters to apply to the current query. (optional)
     - parameter body: (body) Parameters to send with the custom request. (optional)
     - returns: AnyCodable
     */
  @available(macOS 10.15, iOS 13.0, tvOS 13.0, watchOS 6.0, *)
  open class func customPost(
    path: String, parameters: [String: AnyCodable]? = nil, body: AnyCodable? = nil
  ) async throws -> AnyCodable {
    return try await customPostWithRequestBuilder(path: path, parameters: parameters, body: body)
      .execute().body
  }

  /**
     Send requests to the Algolia REST API.

     This method allow you to send requests to the Algolia REST API.
     - parameter path: (path) Path of the endpoint, anything after \&quot;/1\&quot; must be specified.
     - parameter parameters: (query) Query parameters to apply to the current query. (optional)
     - parameter body: (body) Parameters to send with the custom request. (optional)
     - returns: RequestBuilder<AnyCodable>
     */
  open class func customPostWithRequestBuilder(
    path: String, parameters: [String: AnyCodable]? = nil, body: AnyCodable? = nil
  ) -> RequestBuilder<AnyCodable> {
    var localVariablePath = "/1{path}"
    let pathPreEscape = "\(APIHelper.mapValueToPathItem(path))"
    let pathPostEscape =
      pathPreEscape.addingPercentEncoding(withAllowedCharacters: .urlPathAllowed) ?? ""
    localVariablePath = localVariablePath.replacingOccurrences(
      of: "{path}", with: pathPostEscape, options: .literal, range: nil)
    let localVariableURLString = AlgoliaSearchClientAPI.basePath + localVariablePath
    let localVariableParameters = JSONEncodingHelper.encodingParameters(forEncodableObject: body)

    var localVariableUrlComponents = URLComponents(string: localVariableURLString)
    localVariableUrlComponents?.queryItems = APIHelper.mapValuesToQueryItems([
      "parameters": (wrappedValue: parameters?.encodeToJSON(), isExplode: true)
    ])

    let localVariableNillableHeaders: [String: Any?] = [:]

    let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

    let localVariableRequestBuilder: RequestBuilder<AnyCodable>.Type = AlgoliaSearchClientAPI
      .requestBuilderFactory.getBuilder()

    return localVariableRequestBuilder.init(
      method: "POST", URLString: (localVariableUrlComponents?.string ?? localVariableURLString),
      parameters: localVariableParameters, headers: localVariableHeaderParameters,
      requiresAuthentication: true)
  }

  /**
     Send requests to the Algolia REST API.

     - parameter path: (path) Path of the endpoint, anything after \&quot;/1\&quot; must be specified.
     - parameter parameters: (query) Query parameters to apply to the current query. (optional)
     - parameter body: (body) Parameters to send with the custom request. (optional)
     - returns: AnyCodable
     */
  @available(macOS 10.15, iOS 13.0, tvOS 13.0, watchOS 6.0, *)
  open class func customPut(
    path: String, parameters: [String: AnyCodable]? = nil, body: AnyCodable? = nil
  ) async throws -> AnyCodable {
    return try await customPutWithRequestBuilder(path: path, parameters: parameters, body: body)
      .execute().body
  }

  /**
     Send requests to the Algolia REST API.

     This method allow you to send requests to the Algolia REST API.
     - parameter path: (path) Path of the endpoint, anything after \&quot;/1\&quot; must be specified.
     - parameter parameters: (query) Query parameters to apply to the current query. (optional)
     - parameter body: (body) Parameters to send with the custom request. (optional)
     - returns: RequestBuilder<AnyCodable>
     */
  open class func customPutWithRequestBuilder(
    path: String, parameters: [String: AnyCodable]? = nil, body: AnyCodable? = nil
  ) -> RequestBuilder<AnyCodable> {
    var localVariablePath = "/1{path}"
    let pathPreEscape = "\(APIHelper.mapValueToPathItem(path))"
    let pathPostEscape =
      pathPreEscape.addingPercentEncoding(withAllowedCharacters: .urlPathAllowed) ?? ""
    localVariablePath = localVariablePath.replacingOccurrences(
      of: "{path}", with: pathPostEscape, options: .literal, range: nil)
    let localVariableURLString = AlgoliaSearchClientAPI.basePath + localVariablePath
    let localVariableParameters = JSONEncodingHelper.encodingParameters(forEncodableObject: body)

    var localVariableUrlComponents = URLComponents(string: localVariableURLString)
    localVariableUrlComponents?.queryItems = APIHelper.mapValuesToQueryItems([
      "parameters": (wrappedValue: parameters?.encodeToJSON(), isExplode: true)
    ])

    let localVariableNillableHeaders: [String: Any?] = [:]

    let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

    let localVariableRequestBuilder: RequestBuilder<AnyCodable>.Type = AlgoliaSearchClientAPI
      .requestBuilderFactory.getBuilder()

    return localVariableRequestBuilder.init(
      method: "PUT", URLString: (localVariableUrlComponents?.string ?? localVariableURLString),
      parameters: localVariableParameters, headers: localVariableHeaderParameters,
      requiresAuthentication: true)
  }

  /**
     Delete a user profile.

     - parameter userToken: (path) userToken representing the user for which to fetch the Personalization profile.
     - returns: DeleteUserProfileResponse
     */
  @available(macOS 10.15, iOS 13.0, tvOS 13.0, watchOS 6.0, *)
  open class func deleteUserProfile(userToken: String) async throws -> DeleteUserProfileResponse {
    return try await deleteUserProfileWithRequestBuilder(userToken: userToken).execute().body
  }

  /**
     Delete a user profile.

     Delete the user profile and all its associated data.  Returns, as part of the response, a date until which the data can safely be considered as deleted for the given user. This means if you send events for the given user before this date, they will be ignored. Any data received after the deletedUntil date will start building a new user profile.  It might take a couple hours for the deletion request to be fully processed.
     - parameter userToken: (path) userToken representing the user for which to fetch the Personalization profile.
     - returns: RequestBuilder<DeleteUserProfileResponse>
     */
  open class func deleteUserProfileWithRequestBuilder(userToken: String) -> RequestBuilder<
    DeleteUserProfileResponse
  > {
    var localVariablePath = "/1/profiles/{userToken}"
    let userTokenPreEscape = "\(APIHelper.mapValueToPathItem(userToken))"
    let userTokenPostEscape =
      userTokenPreEscape.addingPercentEncoding(withAllowedCharacters: .urlPathAllowed) ?? ""
    localVariablePath = localVariablePath.replacingOccurrences(
      of: "{userToken}", with: userTokenPostEscape, options: .literal, range: nil)
    let localVariableURLString = AlgoliaSearchClientAPI.basePath + localVariablePath
    let localVariableParameters: [String: Any]? = nil

    let localVariableUrlComponents = URLComponents(string: localVariableURLString)

    let localVariableNillableHeaders: [String: Any?] = [:]

    let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

    let localVariableRequestBuilder: RequestBuilder<DeleteUserProfileResponse>.Type =
      AlgoliaSearchClientAPI.requestBuilderFactory.getBuilder()

    return localVariableRequestBuilder.init(
      method: "DELETE", URLString: (localVariableUrlComponents?.string ?? localVariableURLString),
      parameters: localVariableParameters, headers: localVariableHeaderParameters,
      requiresAuthentication: true)
  }

  /**
     Get the current strategy.

     - returns: PersonalizationStrategyParams
     */
  @available(macOS 10.15, iOS 13.0, tvOS 13.0, watchOS 6.0, *)
  open class func getPersonalizationStrategy() async throws -> PersonalizationStrategyParams {
    return try await getPersonalizationStrategyWithRequestBuilder().execute().body
  }

  /**
     Get the current strategy.

     The strategy contains information on the events and facets that impact user profiles and personalized search results.
     - returns: RequestBuilder<PersonalizationStrategyParams>
     */
  open class func getPersonalizationStrategyWithRequestBuilder() -> RequestBuilder<
    PersonalizationStrategyParams
  > {
    let localVariablePath = "/1/strategies/personalization"
    let localVariableURLString = AlgoliaSearchClientAPI.basePath + localVariablePath
    let localVariableParameters: [String: Any]? = nil

    let localVariableUrlComponents = URLComponents(string: localVariableURLString)

    let localVariableNillableHeaders: [String: Any?] = [:]

    let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

    let localVariableRequestBuilder: RequestBuilder<PersonalizationStrategyParams>.Type =
      AlgoliaSearchClientAPI.requestBuilderFactory.getBuilder()

    return localVariableRequestBuilder.init(
      method: "GET", URLString: (localVariableUrlComponents?.string ?? localVariableURLString),
      parameters: localVariableParameters, headers: localVariableHeaderParameters,
      requiresAuthentication: true)
  }

  /**
     Get a user profile.

     - parameter userToken: (path) userToken representing the user for which to fetch the Personalization profile.
     - returns: GetUserTokenResponse
     */
  @available(macOS 10.15, iOS 13.0, tvOS 13.0, watchOS 6.0, *)
  open class func getUserTokenProfile(userToken: String) async throws -> GetUserTokenResponse {
    return try await getUserTokenProfileWithRequestBuilder(userToken: userToken).execute().body
  }

  /**
     Get a user profile.

     Get the user profile built from Personalization strategy.  The profile is structured by facet name used in the strategy. Each facet value is mapped to its score. Each score represents the user affinity for a specific facet value given the userToken past events and the Personalization strategy defined. Scores are bounded to 20. The last processed event timestamp is provided using the ISO 8601 format for debugging purposes.
     - parameter userToken: (path) userToken representing the user for which to fetch the Personalization profile.
     - returns: RequestBuilder<GetUserTokenResponse>
     */
  open class func getUserTokenProfileWithRequestBuilder(userToken: String) -> RequestBuilder<
    GetUserTokenResponse
  > {
    var localVariablePath = "/1/profiles/personalization/{userToken}"
    let userTokenPreEscape = "\(APIHelper.mapValueToPathItem(userToken))"
    let userTokenPostEscape =
      userTokenPreEscape.addingPercentEncoding(withAllowedCharacters: .urlPathAllowed) ?? ""
    localVariablePath = localVariablePath.replacingOccurrences(
      of: "{userToken}", with: userTokenPostEscape, options: .literal, range: nil)
    let localVariableURLString = AlgoliaSearchClientAPI.basePath + localVariablePath
    let localVariableParameters: [String: Any]? = nil

    let localVariableUrlComponents = URLComponents(string: localVariableURLString)

    let localVariableNillableHeaders: [String: Any?] = [:]

    let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

    let localVariableRequestBuilder: RequestBuilder<GetUserTokenResponse>.Type =
      AlgoliaSearchClientAPI.requestBuilderFactory.getBuilder()

    return localVariableRequestBuilder.init(
      method: "GET", URLString: (localVariableUrlComponents?.string ?? localVariableURLString),
      parameters: localVariableParameters, headers: localVariableHeaderParameters,
      requiresAuthentication: true)
  }

  /**
     Set a new strategy.

     - parameter personalizationStrategyParams: (body)
     - returns: SetPersonalizationStrategyResponse
     */
  @available(macOS 10.15, iOS 13.0, tvOS 13.0, watchOS 6.0, *)
  open class func setPersonalizationStrategy(
    personalizationStrategyParams: PersonalizationStrategyParams
  ) async throws -> SetPersonalizationStrategyResponse {
    return try await setPersonalizationStrategyWithRequestBuilder(
      personalizationStrategyParams: personalizationStrategyParams
    ).execute().body
  }

  /**
     Set a new strategy.

     A strategy defines the events and facets that impact user profiles and personalized search results.
     - parameter personalizationStrategyParams: (body)
     - returns: RequestBuilder<SetPersonalizationStrategyResponse>
     */
  open class func setPersonalizationStrategyWithRequestBuilder(
    personalizationStrategyParams: PersonalizationStrategyParams
  ) -> RequestBuilder<SetPersonalizationStrategyResponse> {
    let localVariablePath = "/1/strategies/personalization"
    let localVariableURLString = AlgoliaSearchClientAPI.basePath + localVariablePath
    let localVariableParameters = JSONEncodingHelper.encodingParameters(
      forEncodableObject: personalizationStrategyParams)

    let localVariableUrlComponents = URLComponents(string: localVariableURLString)

    let localVariableNillableHeaders: [String: Any?] = [:]

    let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

    let localVariableRequestBuilder: RequestBuilder<SetPersonalizationStrategyResponse>.Type =
      AlgoliaSearchClientAPI.requestBuilderFactory.getBuilder()

    return localVariableRequestBuilder.init(
      method: "POST", URLString: (localVariableUrlComponents?.string ?? localVariableURLString),
      parameters: localVariableParameters, headers: localVariableHeaderParameters,
      requiresAuthentication: true)
  }
}
